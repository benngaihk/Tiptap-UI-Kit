/**
 * TiptapPro 公共基础样式
 * @description 提取的公共变量、混入样式、动画和工具类
 */

/* ========== CSS 变量（亮色/暗色主题） ========== */
:root {
  /* 基础色彩 */
  --tp-color-text: #333;
  --tp-color-text-secondary: #666;
  --tp-color-text-muted: #999;
  --tp-color-bg: #fff;
  --tp-color-bg-gray: #f5f5f5;
  --tp-color-bg-hover: #f0f0f0;
  --tp-color-border: #e0e0e0;
  --tp-color-border-light: #f0f0f0;
  
  /* 主题色 */
  --tp-color-primary: #1890ff;
  --tp-color-primary-bg: #e6f7ff;
  --tp-color-danger: #ff4d4f;
  --tp-color-danger-bg: #fff1f0;
  
  /* 菜单样式 */
  --tp-menu-bg: #fff;
  --tp-menu-shadow: 0 4px 12px rgb(0 0 0 / 15%);
  --tp-menu-radius: 8px;
  
  /* 按钮尺寸 */
  --tp-btn-size: 32px;
  --tp-btn-size-sm: 28px;
  --tp-btn-icon-size: 16px;
  
  /* 动画时长 */
  --tp-transition-fast: 0.15s ease;
  --tp-transition-normal: 0.2s ease;
}

/* 暗色模式变量 */
:where(.dark, .dark *, [data-theme="dark"], [data-theme="dark"] *),
:where([data-theme="dark"], [data-theme="dark"] *) {
  --tp-color-text: #f0f0f0;
  --tp-color-text-secondary: #d0d0d0;
  --tp-color-text-muted: #8c8c8c;
  --tp-color-bg: #1f1f1f;
  --tp-color-bg-gray: #262626;
  --tp-color-bg-hover: #303030;
  --tp-color-border: #434343;
  --tp-color-border-light: #303030;
  
  --tp-color-primary: #4fc3f7;
  --tp-color-primary-bg: #1a4d6e;
  --tp-color-danger: #ff7875;
  --tp-color-danger-bg: #3a1a1a;
  
  --tp-menu-bg: #1f1f1f;
  --tp-menu-shadow: 0 4px 12px rgb(0 0 0 / 40%);
}

/* ========== 公共菜单容器 ========== */
.tp-menu {
  display: flex;
  padding: 4px;
  background: var(--tp-menu-bg);
  border-radius: var(--tp-menu-radius);
  box-shadow: var(--tp-menu-shadow);
}

.tp-menu-content {
  display: flex;
  gap: 4px;
  align-items: center;
}

.tp-menu-group {
  display: flex;
  gap: 2px;
  align-items: center;
  padding: 0 4px;
  border-right: 1px solid var(--tp-color-border);
}

.tp-menu-group:last-child {
  border-right: none;
}

/* ========== 公共按钮样式 ========== */
.tp-btn {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  width: var(--tp-btn-size);
  height: var(--tp-btn-size);
  padding: 0;
  font-size: var(--tp-btn-icon-size);
  color: var(--tp-color-text-secondary);
  cursor: pointer;
  background: transparent;
  border: none;
  border-radius: 6px;
  transition: all var(--tp-transition-normal);
}

.tp-btn:hover:not(:disabled) {
  color: var(--tp-color-text);
  background: var(--tp-color-bg-hover);
}

.tp-btn.active {
  color: var(--tp-color-primary);
  background: var(--tp-color-primary-bg);
}

.tp-btn:disabled {
  color: var(--tp-color-text-muted);
  cursor: not-allowed;
  opacity: 0.5;
}

.tp-btn--danger {
  color: var(--tp-color-danger);
}

.tp-btn--danger:hover:not(:disabled) {
  color: var(--tp-color-danger);
  background: var(--tp-color-danger-bg);
}

.tp-btn .anticon {
  font-size: var(--tp-btn-icon-size);
}

/* ========== 颜色选择面板 ========== */
.tp-color-panel {
  display: grid;
  grid-template-columns: repeat(8, 24px);
  gap: 8px;
  padding: 12px;
  background: var(--tp-menu-bg);
  border-radius: 4px;
}

.tp-color-item {
  width: 24px;
  height: 24px;
  cursor: pointer;
  border: 1px solid var(--tp-color-border);
  border-radius: 4px;
  transition: transform var(--tp-transition-normal);
}

.tp-color-item:hover {
  box-shadow: 0 2px 8px rgb(0 0 0 / 20%);
  transform: scale(1.2);
}

:where(.dark, .dark *, [data-theme="dark"], [data-theme="dark"] *) .tp-color-item:hover,
:where([data-theme="dark"], [data-theme="dark"] *) .tp-color-item:hover {
  box-shadow: 0 2px 8px rgb(0 0 0 / 50%);
}

/* ========== 下拉菜单项 ========== */
.tp-dropdown-menu {
  min-width: 150px;
  padding: 6px;
  background: var(--tp-menu-bg);
  border-radius: var(--tp-menu-radius);
  box-shadow: var(--tp-menu-shadow);
}

.tp-dropdown-item {
  display: flex;
  gap: 12px;
  align-items: center;
  width: 100%;
  padding: 8px 12px;
  font-size: 14px;
  color: var(--tp-color-text);
  text-align: left;
  cursor: pointer;
  background: transparent;
  border: none;
  border-radius: 4px;
  transition: background-color var(--tp-transition-fast);
}

.tp-dropdown-item:hover {
  background: var(--tp-color-bg-hover);
}

.tp-dropdown-item.active {
  color: var(--tp-color-primary);
  background: var(--tp-color-primary-bg);
}

.tp-dropdown-item--danger {
  color: var(--tp-color-danger);
}

.tp-dropdown-item--danger:hover {
  background: var(--tp-color-danger-bg);
}

.tp-dropdown-divider {
  height: 1px;
  margin: 4px 0;
  background: var(--tp-color-border);
}

/* ========== 公共动画 ========== */
@keyframes tp-fade-in {
  from {
    opacity: 0;
    transform: translateY(-4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes tp-slide-in {
  from {
    opacity: 0;
    transform: translateX(-8px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes tp-blink {
  0%, 49% { opacity: 1; }
  50%, 100% { opacity: 0; }
}

/* ========== 响应式断点 ========== */
@media (max-width: 768px) {
  :root {
    --tp-btn-size: 28px;
    --tp-btn-icon-size: 14px;
  }
  
  .tp-color-panel {
    grid-template-columns: repeat(6, 24px);
    gap: 6px;
    padding: 8px;
  }
  
  .tp-color-item {
    width: 20px;
    height: 20px;
  }
}

/* ========== 打印隐藏 ========== */
@media print {
  .tp-menu,
  .tp-dropdown-menu,
  .tp-color-panel {
    display: none !important;
  }
}

/* ========== 工具类 ========== */
.tp-flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

.tp-hidden {
  display: none !important;
}

.tp-visible {
  display: flex !important;
}

